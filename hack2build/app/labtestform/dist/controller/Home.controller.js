sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast"],function(e,t){"use strict";var n,o;return e.extend("com.mindset.labtestform.controller.Home",{onInit:function(){n=this.getOwnerComponent().getModel();o=this.getOwnerComponent().getModel("labTestModel");this.getMaterials();this._setTimeText()},onHandleRole:function(e){var t=e.getParameters().selectedItem.getKey();if(t==="Lab Technician"||t==="Researcher"){o.setProperty("/objForm/visiblePanel",true)}else{o.setProperty("/objForm/visiblePanel",false)}},onSave:function(){var e=o.getProperty("/objForm");e.universityid=parseInt(e.universityid);delete e.visiblePanel;var r=this;$.ajax({type:"POST",url:n.getServiceUrl()+"LabAssessmentInfo",contentType:"application/json",data:JSON.stringify(e),async:true,success:function(e){t.show("Successfully submitted");r.onCancel()},error:function(e){console.log(e)}})},onCancel:function(){o.setProperty("/objForm",{})},onDateChange:function(e){var t=new Date(e.getParameter("newValue"));o.setProperty("/objForm/formFilledDate",t.toISOString())},_setTimeText:function(){var e=this;setInterval(function(){e.getView().byId("idTextDate").setText("Time :"+new Date)},1e3)},getMaterials:function(){var e=this;$.ajax({type:"GET",url:n.getServiceUrl()+"AssetInformation()",contentType:"application/json",async:true,success:function(e){o.setProperty("/MaterialType",e.value)},error:function(e){console.log(e)}})}})});